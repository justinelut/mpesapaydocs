## Example

Here is a complete example implementation:

```javascript
import MpesaPay from 'mpesapay';
```

Create an instance of the `MpesaPay` class with your Mpesa API credentials:

Import default `MpesaPay` from the `mpesapay` module in your Node.js, Nextjs, SveltKit, Nuxtjs application:

```javascript
import MpesaPay from 'mpesapay';
```

Create an instance of the `MpesaPay` class with your Mpesa API credentials:

```javascript
const Consumer_Key = 'YOUR_CONSUMER_KEY';
const Consumer_Secret = 'YOUR_CONSUMER_SECRET';
const Business_Short_Code = 'YOUR_BUSINESS_SHORT_CODE';
const Passkey = 'YOUR_PASS_KEY';
const Transaction_Description = 'YOUR_TRANSACTION_DESCRIPTION';
const Account_Reference = 'YOUR_ACCOUNT_REFERENCE';
const PartyA = "YOUR_MPESA_PARTYA"
const B2C_Security_Credential = "YOUR MPESA B2C SECURITY CREDENTIAL"
const Initiator_Name = "YOUR MPESA INITIATORS NAME"
const Environment = 'THE ENVIRONMENT i.e sandbox or live'
const Transaction_Type = "YOUR SHORTCODE TYPE i.e paybill or till"



const mpesapay = new MpesaPay(
  Consumer_Key,
  Consumer_Secret,
  Business_Short_Code,
  Passkey,
  Account_Reference,
  Transaction_Description,
  PartyA,
  B2C_Security_Credential,
  Initiator_Name,
  Environment
  Transaction_Type
);
```

Replace the placeholders with your actual Mpesa credentials.

**Initiating a Payment**

To initiate a payment using Mpesa Pay, you can call the `stkPush` method:

```javascript
async function initiatePayment(amount, phoneNumber, callbackUrl) {
  try {
    const response = await mpesapay.stkPush(amount, phoneNumber, callbackUrl);
    console.log(response);
    // Handle the response data
  } catch (error) {
    console.error(error);
    // Handle errors
  }
}

// Call the function to initiate a payment
const amount = '100';
const phoneNumber = '254712345678';
const callbackUrl = 'https://example.com/callback';
initiatePayment(amount, phoneNumber, callbackUrl);
```

## Response Object

If the stkpush method is successful, a response object with data as below is returned. This shows that a prompt for payment was
requested to the clients phone.


```json
    {
        "MerchantRequestID": "71316-96354261-1",
        "CheckoutRequestID": "ws_CO_17072023124623869740455200",
        "ResponseCode": "0",
        "ResponseDescription": "Success. Request accepted for processing",
        "CustomerMessage": "Success. Request accepted for processing"
    }
```


> The `CheckoutRequestID` obtained from a successful response is crucial for verifying the payment status. Therefore, it needs to be stored for future reference.

## TypeScript Support

The Mpesa Pay module includes TypeScript type definitions, providing enhanced development experience and type checking capabilities when using the library in a TypeScript project.


That's it! You can now integrate Mpesa payments into your Node.js application using the Mpesa Pay library.

> Please note that ```stkPush``` only initiates payments, and the results will be sent to the provided callback URL. Make sure to implement the necessary server-side logic to handle the payment confirmation notifications and update your database accordingly.


