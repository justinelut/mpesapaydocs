## Mpesa Pay JavaScript SDK Library

Mpesa Pay is a server-side JavaScript SDK library that enables developers to easily integrate Mpesa payments into their server-side applications. It provides an intuitive interface for initiating Mpesa STK Push requests, checking payment status, retrieving the account balance for the M-Pesa business account, and enabling Business-to-Customers payments.

### Problem Statement

The motivation behind creating the Mpesa Pay library was to address several challenges faced by developers when integrating Mpesa payments into their applications:

1. **Complexity of Direct API Integration**: Integrating the Mpesa API directly can be challenging, especially for solo developers. It requires managing multiple complex mechanisms simultaneously, such as authentication, handling callbacks, and transaction status tracking.

2. **Outdated Documentation and Integration Difficulties**: Some payment providers, like Pesapal, may have outdated documentation and limited support for their APIs. This can make it difficult for developers to understand and utilize the API effectively, leading to integration difficulties and potential errors.

3. **Lack of Abstraction and Readability**: Many npm libraries for Mpesa integration do not provide a higher level of abstraction, resulting in verbose and difficult-to-understand code. This can hinder developer productivity and increase the potential for errors.

### Code Comparison

To illustrate the difference in code readability and abstraction, let's compare the code for initiating an STK Push request using the `Mpesa-Api` library and the Mpesa Pay library:

#### Mpesa-Api Library
```javascript
mpesa.lipaNaMpesaOnline({
  BusinessShortCode: 123456,
  Amount: 1000, // Example amount
  PartyA: "Party A",
  PhoneNumber: "Phone Number",
  CallBackURL: "CallBack URL",
  AccountReference: "Account Reference",
  passKey: "Lipa Na Mpesa Pass Key",
  TransactionType: "Transaction Type", // OPTIONAL
  TransactionDesc: "Transaction Description", // OPTIONAL
})
.then((response) => {
  // Do something with the response
  console.log(response);
})
.catch((error) => {
  // Do something with the error
  console.error(error);
});
```

#### Mpesa Pay Library
```javascript
const response = await mpesapay.stkPush(amount, phoneNumber, callbackUrl);
```

As shown in the code comparison, the Mpesa Pay library simplifies the integration process and enhances code readability by providing a more concise and abstracted approach. Developers can initiate an STK Push request with fewer parameters and utilize the `async/await` syntax, resulting in cleaner and more streamlined code.

By addressing the challenges of complexity, outdated documentation, and lack of abstraction, the Mpesa Pay library offers a developer-friendly solution for integrating Mpesa payments into server-side JavaScript applications.

### Who is it For?

The Mpesa Pay library is primarily intended for developers in the JavaScript ecosystem, particularly those working with Node.js, Next.js, Nuxt.js, and SvelteKit frameworks. It provides a convenient solution for developers who want to integrate Mpesa payments into their server-side applications without having to deal with the intricacies of the Mpesa API directly.

### Features and Functionality

The Mpesa Pay library offers the following key features and functionality:

- **STK Push Requests**: The library provides an intuitive interface for initiating Mpesa STK Push requests. This enables customers to make payments for goods and services directly from their mobile phones.

- **Payment Status Checking**: Developers can easily check the status of Mpesa payments using the library. This allows them to retrieve real-time information about successful or failed transactions.

- **Account Balance Retrieval**: The library facilitates the retrieval of the account balance for M-Pesa business accounts. Developers can effortlessly fetch the current balance information for their M-Pesa business accounts.

- **Business-to-Customers Payments**: Mpesa Pay enables seamless integration of Business-to-Customers payments. This feature allows businesses to receive payments from their customers through the Mpesa platform.
