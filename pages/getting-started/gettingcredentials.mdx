## Sandbox Mode:
In sandbox mode, you can use simulated transactions to test your M-Pesa integration without using real money.

#### Consumer Key and Consumer Secret (Sandbox Mode):
1. Go to the Safaricom Developer Portal (https://developer.safaricom.co.ke/) and create an account if you haven't already.
![Safaricom Developers Portals](/featured.png)


2. Go to MY APPS.
![Safaricom App](/mpesaexpress/portal.png)


3. Create a new app, and check all the Checkboxes
![Safaricom App](/mpesaexpress/app.png)


4. Once the app is created, you will find the Consumer Key and Consumer Secret in the app's details page. These credentials are specific to the sandbox environment.
![Safaricom App](/mpesaexpress/credentials.png)


> Copy the Consumer Key & The Consumer Secret and put them in a secure place, forexample on an ENV file.


#### Business Short Code | Passkey | Party A | Party B | Initiator Name  (Sandbox Mode):
 To get the above details you have to follow the below procedure

1. Go to the APIS tab as shown below, then go to Mpesa Express card & click Query button
![Safaricom App](/mpesaexpress/api.png)
  
2. On the right, select the app you created
![Safaricom App](/mpesaexpress/selectapp.png)

3. Below the app you have selected click on the Test Credentials button
![Safaricom App](/mpesaexpress/testcredentials.png)

4. You will now see the Business SHort Code, Passkey, PartyA, PartyB & Initiator Name
![Safaricom App](/mpesaexpress/copydetails.png)

>Now copy the Business Short code, Passkey, PartyA, PartyB & Initiator Name and include them in your .env or the file you are putting them in.

#### B2C Security Credential (Sandbox Mode):

1. Copy the inititor password from the Test Credentials
![Safaricom App](/mpesaexpress/initiatorpassword.png)

2. Now, Hover on to the MY APPS tab & Click on the Test Credentials Link
![Safaricom App](/mpesaexpress/b2csecuritycredential.png)

3. Now Enter the initiators password you copied in the password input box, then select the environment, and click generate
![Safaricom App](/mpesaexpress/b2csecurity.png)

> Now copy the Business2Customer security credential generated & add it into your .env file or the file you are putting your environment variables

#### Account Reference and Transaction Description (Sandbox Mode):
The Account Reference and Transaction Description can be customized based on your application's needs. You can use sample values or descriptive information for testing purposes.


#### Environment (Sandbox Mode):
The Environment by default is in sandboxmode in the mpesapay module, but you can define it in your .env file as below
 ```bash 
 "sandbox"
 ```

 After taking all the above Details, your .env or the file you have put the variables should look something like this

```env 
    MPESA_CONSUMER_KEY=YOUR CONSUMER KEY
    MPESA_CONSUMER_SECRET=YOUR CONSUMER SECRET
    MPESA_PASS_KEY=YOUR PASS KEY
    MPESA_B2C_SECURITY_CREDENTIAL=YOUR SECURITY CREDENTIAL
    MPESA_BUSINESS_SHORT_CODE=174379
    MPESA_PARTYA=600998
    MPESA_PARTYB=600998
    MPESA_INITIATOR_NAME="testapi"
    MPESA_ENVIRONMENT="sandbox | live"
```

> You are now ready to start the development process, keep in mind the above credentials will enable you to be able to use all the functionality of 
the mpesapay module.

## Production Mode:
In production mode, you will use the actual M-Pesa service, and the credentials and information will be specific to your production M-Pesa account.

#### Consumer Key and Consumer Secret (Production Mode):
To obtain the Consumer Key and Consumer Secret for production mode, you need to follow the steps mentioned earlier, but this time, create an app and obtain the credentials from the Safaricom Developer Portal in the production environment.

#### Business Short Code and Passkey (Production Mode):
When you register for an M-Pesa business account in production mode, Safaricom will provide you with a unique Business Short Code and Passkey. These credentials will be specific to your production M-Pesa account.

#### Account Reference and Transaction Description (Production Mode):
You can customize the Account Reference and Transaction Description based on your production application's needs. Choose meaningful values that accurately represent the purpose of the payment transactions.

#### Party A (Production Mode):
In production mode, Party A should be your actual business shortcode or the phone number associated with your M-Pesa business account.

#### B2C Security Credential (Production Mode):
When you register for an M-Pesa business account in production mode, Safaricom will provide you with the necessary credentials, including the B2C Security Credential. Use this specific credential for processing B2C payments in the production environment.

#### Initiator Name (Production Mode):
Choose an appropriate name or identifier as the Initiator Name for your production environment. It should accurately represent the entity or individual initiating the transaction.

#### Environment (Production Mode):
In production mode, the environment for mpesapay module is 'live'. Use this when making M-Pesa API requests in the production environment.

Please note that the actual values and credentials will depend on your specific M-Pesa business account and integration setup. Be sure to refer to the Safaricom Developer Portal documentation and guides for the accurate process of obtaining these details in both sandbox and production modes.